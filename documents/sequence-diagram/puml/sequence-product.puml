@startuml 상품_목록_조회
title 1.1 상품 목록 조회

actor Client
participant ProductController
participant ProductService
database DB

Client -> ProductController: GET /api/products?page&size&search
ProductController -> ProductService: getProducts()
ProductService -> DB: findAll()
DB --> ProductService: List<Product>
ProductService -> DB: count()
DB --> ProductService: total
ProductService --> ProductController: ProductListResponse
ProductController --> Client: 200 OK

@enduml

@startuml 상품_상세_조회
title 1.2 상품 상세 조회

actor Client
participant ProductController
participant ProductService
database DB

Client -> ProductController: GET /api/products/{productId}
ProductController -> ProductService: getProduct()
ProductService -> DB: findById()
DB --> ProductService: Optional<Product>

alt 상품 없음
    ProductService --> ProductController: ProductNotFoundException
    ProductController --> Client: 404 PRODUCT_NOT_FOUND
else 상품 존재
    ProductService --> ProductController: ProductResponse
    ProductController --> Client: 200 OK
end

@enduml

@startuml 인기상품_조회
title 1.3 인기 상품 조회

actor Client
participant ProductController
participant ProductService
database DB

Client -> ProductController: GET /api/products/popular
ProductController -> ProductService: getPopularProducts()
ProductService -> DB: findTop5ByRecentSales()
note right: 최근 3일간 판매량 기준
DB --> ProductService: List<Product>
ProductService --> ProductController: PopularProductResponse
ProductController --> Client: 200 OK

@enduml
